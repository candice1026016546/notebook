---
layout: post
title: 数据库基本概念
category: 数据库
tag: 数据库
---

* toc
{:toc}

## 数据库管理系统概述

### 数据库是什么?

“数据库”这个术语是指由数据库管理系统( database management syst em, 简称为 DBMS, 或称为数据库系统) 管理的数据聚集。

### 关系型数据库

数据库最早出现在 20 世纪 60 年代，那时的数据库是由文件系统演变而来的。后来 Ted Codd 提出关系型数据库的概念。这里的关系就是说数据应该存储在表中。对于数据如何存储，用户并不关心。数据库系统提供高级的查询语言，用户使用查询语句得到需要的数据。

比如下面是一张名为 Accounts 的表：

![center](http://ok43olqzw.bkt.clouddn.com/18-3-1/97765908.jpg)

表的各列以属性开始，每一行都是一个元组，上图表中只显示了两个元组，每个元组中有 3 个元素。

可以使用 SQL 语句查询表中的数据。比如如果要查询账号为 67890 的账户的余额，则可以使用如下查询语句：

```sql
SELECT balance
FROM Accounts
WHERE account No = 67890;
```

上面这段查询语句做的工作是：

1. 检查 FROM 子句给出的 Accounts 关系的所有元组;
2. 选出满足 WHERE 子句给出的某个判别条件的元组;
3. 将这些元组按 SELECT 子句指定的某些属性组织成结果输出。


### 数据库系统的组成与结构

数据库系统应该由下列几部分组成：

1. 数据定义语言，用来建立数据库和规定数据的格式
2. 数据查询语言，用来查询或更新数据
3. 支持存储大量数据的存储系统
4. 对多用户访问的支持，用户之间访问不受彼此影响

其结构大致如下图：

![center](http://ok43olqzw.bkt.clouddn.com/18-3-1/75061219.jpg)

数据库管理员通过数据定义语言（DDL）来建立表，以及给表中添加各个列，以及确定它们之间的关系。相当于建立一张空的某种表格一样。

用户通过数据操作语言（DML）来从表中检索信息，添加、修改或删除信息，但是不能对表的结果做改变。用户提交的每个操作指令被组织成事务，事务是原子性的执行单位，各个事务之间要相互隔离。

每个事务都会被记录在日志中，日志管理器可以保证任何时候数据库系统崩溃后，通过日志都能完成恢复。

![center&width=700px](http://ok43olqzw.bkt.clouddn.com/18-3-1/54147644.jpg)

## 关系数据库模型

### 数据模型

数据模型用于描述数据或信息，它由三部分组成：

1. 数据结构：这里的数据结构不同于 Java 等编程语言中的数据结构，而是指数据存储在物理磁盘上的数据块中的结构。
2. 数据操作：对数据结构的操作，如删除、修改、查询等。
3. 数据上的约束：对数据的约束条件，比如对于星期数，只能是 1-7 之间的数字。

### 关系模型
 
关系模型提供了一种单一的描述数据的方法：一个成为**关系**的二维表。如下图所示：
 
![center](http://ok43olqzw.bkt.clouddn.com/18-3-2/64905105.jpg)
 
该表就是一个关系，其名称为 Movies，其中每一行为一部电影的信息。下面是与关系相关的术语：
 
#### 属性

关系中每一列命名为一个属性，比如上图中属性分别为 `title`, `year`, `length`, `genre`。属性应该描述该列的含义。属性是集合，而非列表，看起来有先后次序，实际上只是书写的需要。
#### 模式

关系名其属性集合的组合称之为关系的**模式**。描述模式通常是使用关系名(属性) 这样的方式，如：`Movies(title, year, length, genre)`。
#### 元组

关系中出了属性所在行的其他行都被称为**元组**，每个元组都有一个**分量**对应于关系的每个属性。

#### 域：

元组中的每个分量都应该是最基本的内容，如 integer 或者 string，而不能是列表、集合等。关系中每个属性都属于一个域（或类型），元组对应该列的分量必须也是这种类型。

#### 关系实例

一个给定的关系中的元组的集合叫做关系的实例。

#### 键

在关系模型中可以增加一些约束，其中一种就是键约束。关系可以选择一个或者几个属性的集合作为键。每个元组中对应于键的属性的值不能相同。比如每个元组中含有一个身份证号，那么身份证号这个属性就能作为键，因为在每个元组中它都是不同的。


## 代数查询语言


### 集合操作

三个常见的集合操作是：交、并、差。对于相同的关系，可以使用这几种操作，得到新的元组集合。

![](http://ok43olqzw.bkt.clouddn.com/18-3-4/87046776.jpg)

### 投影

投影是从关系 R 中生成新的关系，这个关系只包含原来关系 R 中的部分列。

### 选择

选择操作是通过一个条件，选择满足条件的所有元组。

### 笛卡尔积

笛卡尔积是两个集合做积。

![](http://ok43olqzw.bkt.clouddn.com/18-3-4/18344985.jpg)

### 自然连接

自然连接是通过两个关系中元组的某公共属性来将两个元组连接成一个。

![](http://ok43olqzw.bkt.clouddn.com/18-3-4/56059751.jpg)

### θ 连接

θ 连接中的 θ 是指任意条件，关系 R 和 S 的 θ 连接的结果是先得到 R 和 S 的积，而后寻找满足条件的元组。

各种集合操作组合起来就能构成复杂的查询语句。